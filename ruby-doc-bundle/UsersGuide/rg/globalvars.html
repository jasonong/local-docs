<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"
"http://www.w3.org/TR/REC-html40/strict.dtd">
<HTML><HEAD>
  <LINK rev="made" href="mailto:slagell@ruby-lang.org">
  <TITLE>Global variables</TITLE>
</HEAD>
<BODY bgcolor="#e0e0e0" text="black" vlink="#4444ff"alink="yellow" alink="4444a0">

<table align="center" border="0" cellpadding="15"><tr>
 <td align="center" valign="bottom" width="33%">
 <a href="variables.html">
 <img border=0 src="a2l.gif" alt="Variables"><br>Prev</a></td>
 <td align="center" valign="bottom" width="33%">
 <a href="index.html">
 <img border=0 src="a2u.gif" alt="Contents"><br>Contents</a></td>
 <td align="center" valign="bottom" width="33%">
 <a href="instancevars.html">
 <img border=0 src="a2r.gif" alt="Instance variables"><br>Next</a></td>
 </tr></table>

<hr>
<table bgcolor="#b00000" width="100%" cellpadding="15"  cellspacing="0" align="center" border="0"><tr><td width="10%">&nbsp;</td><td align="left" width="30%"><font face="georgia, charter" size="+2"  color="#b0d0d0">Ruby user's guide</font></td><td align="right" width="50%"><font face="georgia, charter" size="+2"  color="white">Global variables</font></td><td width="10%">&nbsp;</td></tr></table>

<p>A global variable has a name beginning with <code>$</code>.  It
can be referred to from anywhere in a program.  Before
initialization, a global variable has the special value
<code>nil</code>. </p>
<p><table align="center" width="90%" border="1" cellpadding="6" bgcolor="black"><tr><td><pre><font color="white">ruby&gt;<font color="#ffff00"><b> $foo</b></font>
<font color="#50ffff"><b>   nil</b></font>
ruby&gt;<font color="#ffff00"><b> $foo = 5</b></font>
<font color="#50ffff"><b>   5</b></font>
ruby&gt;<font color="#ffff00"><b> $foo</b></font>
<font color="#50ffff"><b>   5</b></font></font></pre></td></tr></table>
<p>Global variables should be used sparingly.  They are dangerous
because they can be written to from anywhere.  Overuse of globals
can make isolating bugs difficult; it also tends to indicate that the
design of a program has not been carefully thought out.  Whenever
you do find it necessary to use a global variable, be sure to give it
a descriptive name that is unlikely to be inadvertently used for
something else later (calling it something like <code>$foo</code> as
above is probably a bad idea).</p>
<p>One nice feature of a global variable is that it can be traced; you
can specify a procedure which is invoked whenever the value of the
variable is changed. </p>
<p><table align="center" width="90%" border="1" cellpadding="6" bgcolor="black"><tr><td><pre><font color="white">ruby&gt;<font color="#ffff00"><b> trace_var :$x, proc{print "$x is now ", $x, "\n"}</b></font>
<font color="#50ffff"><b>   nil</b></font>
ruby&gt;<font color="#ffff00"><b> $x = 5</b></font>
$x is now 5
<font color="#50ffff"><b>   5</b></font></font></pre></td></tr></table>
<p>When a global variable has been rigged to work as a trigger to
invoke a procedure whenever changed, we sometimes call it an <em>active
variable</em>.  For instance, it is useful for keeping a GUI
display up to date.</p>
<p>There is a collection of special variables whose names consist of a
dollar sign (<code>$</code>) followed by a single character.  For example,
<code>$$</code> contains the process id of the ruby interpreter, and is
read-only.  Here are the major system variables and their meanings
(see the ruby
<a href="http://www.ruby-lang.org/en/man-1.4/">reference manual</a>
for details):</p>
<p><table border="1"><tr><td><code>$!</code> </td><td> latest error message </td></tr>
<tr><td>
<code>$@</code> </td><td> location of error </td></tr>
<tr><td>
<code>$_</code> </td><td> string last read by <code>gets</code> </td></tr>
<tr><td>
<code>$.</code> </td><td> line <em>number</em> last read by interpreter </td></tr>
<tr><td>
<code>$&amp;</code> </td><td> string last matched by regexp </td></tr>
<tr><td>
<code>$~</code> </td><td> the last regexp match, as an array of subexpressions </td></tr>
<tr><td>
<code>$</code><em>n</em> </td><td> the <em>nth</em> subexpression in the last match (same as <code>$~[</code><em>n</em><code>]</code>) </td></tr>
<tr><td>
<code>$=</code> </td><td> case-insensitivity flag </td></tr>
<tr><td>
<code>$/</code> </td><td> input record separator </td></tr>
<tr><td>
<code>$\</code> </td><td> output record separator </td></tr>
<tr><td>
<code>$0</code> </td><td> the name of the ruby script file </td></tr>
<tr><td>
<code>$*</code> </td><td> the command line arguments </td></tr>
<tr><td>
<code>$$</code> </td><td> interpreter's process ID </td></tr>
<tr><td>
<code>$?</code> </td><td> exit status of last executed child process</td></tr></table>
<p>In the above, <code>$_</code> and <code>$~</code> have local scope.
Their names suggest they should be global, but they are much more
useful this way, and there are historical reasons for using these
names.</p>

<hr>

<table align="center" border="0" cellpadding="15"><tr>
 <td align="center" valign="bottom" width="33%">
 <a href="variables.html">
 <img border=0 src="a2l.gif" alt="Variables"><br>Prev</a></td>
 <td align="center" valign="bottom" width="33%">
 <a href="index.html">
 <img border=0 src="a2u.gif" alt="Contents"><br>Contents</a></td>
 <td align="center" valign="bottom" width="33%">
 <a href="instancevars.html">
 <img border=0 src="a2r.gif" alt="Instance variables"><br>Next</a></td>
 </tr></table>

</BODY></HTML>
